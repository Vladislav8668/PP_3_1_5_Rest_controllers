<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Таблица пользователей</title>
</head>
<body>
<div class="table-responsive" style="padding: 20px;">
  <table class="table table-striped" style="background-color: #ffffff">
    <thead>
    <tr>
      <th>ID</th>
      <th>Username</th>
      <th>First Name</th>
      <th>Last Name</th>
      <th>Age</th>
      <th>Role</th>
    </tr>
    </thead>
    <tbody>
    <!-- Данные пользователей будут добавлены сюда -->
    </tbody>
  </table>
</div>

<script>
  document.addEventListener('DOMContentLoaded', loadUsers);

  function loadUsers() {
    fetch('http://localhost:8080/admin/users')
            .then(response => response.json())
            .then(data => {
              console.log(data);
              const tbody = document.querySelector('tbody');
              tbody.innerHTML = ''; // Очистите таблицу перед добавлением новых данных
              data.forEach(user => {
                const row = tbody.insertRow();
                row.insertCell(0).textContent = user.id;
                row.insertCell(1).textContent = user.username;
                row.insertCell(2).textContent = user.firstName;
                row.insertCell(3).textContent = user.lastName;
                row.insertCell(4).textContent = user.age;
                row.insertCell(5).textContent = user.roles.map(role => role.name.substring(5)).join(', ');
              });
            });
  }
</script>
</body>
</html>

